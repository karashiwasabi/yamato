<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>YAMATO 集計システム</title>
  <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
  <header id="header">
    <div id="indicator"></div>
    <nav>
      <button id="datBtn"       class="btn">DAT</button>
      <button id="usageBtn"     class="btn">USAGE</button>
      <button id="aggregateBtn" class="btn">集計</button>
      <button id="inventoryBtn" class="btn">棚卸</button>
      <button id="ma2Btn"       class="btn">MA2編集</button>
    </nav>

    <!-- 集計フィルタ部 -->
    <div id="aggregateFilter">
      <form id="filterForm">
        <div class="row">
          <button type="button" id="printTable" class="btn">印刷</button>
          <label>開始日:<input type="date" name="from" required></label>
          <label>終了日:<input type="date" name="to"   required></label>
          <label>商品名フィルタ:<input type="text" name="filter" placeholder="部分一致OK"></label>
          <label><input type="checkbox" name="doyaku" value="1">毒薬</label>
          <label><input type="checkbox" name="gekiyaku" value="1">劇薬</label>
          <label><input type="checkbox" name="mayaku" value="1">麻薬</label>
          <label><input type="checkbox" name="kouseishinyaku" value="1">向1</label>
          <label><input type="checkbox" name="kouseishinyaku" value="2">向2</label>
          <label><input type="checkbox" name="kouseishinyaku" value="3">向3</label>
          <label><input type="checkbox" name="kakuseizai" value="1">覚せい剤</label>
          <label><input type="checkbox" name="kakuseizaiGenryou" value="1">覚せい剤原料</label>
          <button type="submit" class="btn">実行</button>
        </div>
      </form>
    </div>
  </header>

  <!-- ファイル入力フィールド -->
  <input type="file" id="datInput"       style="display:none" multiple>
  <input type="file" id="usageInput"     style="display:none" multiple>
  <input type="file" id="inventoryInput" style="display:none" accept=".csv">

  <!-- 共通 出力テーブル (DAT/USAGE/集計/棚卸用) -->
  <table id="outputTable">
    <thead></thead>
    <tbody></tbody>
  </table>

  <!-- MA2編集用テーブル (初期非表示) -->
  <div class="ma2-editor" style="display:none">
    <!-- ヘッダー専用 -->
    <table id="ma2Header">
      <thead>
          <colgroup>
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:28%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
  </colgroup>


      </thead>
    </table>
    <!-- ボディだけスクロール -->
    <div class="ma2-body">
      <table id="ma2Body">
        <tbody><colgroup>
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:28%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    <col style="width:8%">
    </colgroup>

</tbody>
      </table>
    </div>
  </div>

  <!-- ■ デバッグ領域 -->
  <pre id="debug" style="background:#f0f0f0; padding:0.5em; margin:1em 0;"></pre>

  <!-- スクリプト読み込み -->
  <script src="/static/js/dat.js"></script>
  <script src="/static/js/usage.js"></script>
  <script src="/static/js/aggregate.js"></script>
  <script src="/static/js/inventory.js"></script>
  <script src="/static/js/ma2.js"></script>
</body>
</html>