CREATE TABLE IF NOT EXISTS ma0 (
MA000JC000JanCode TEXT KEY,
MA001JC001JanCodeShikibetsuKubun TEXT,
MA002JC002KyuuJanCode TEXT,
MA003JC003TouitsuShouhinCode TEXT,
MA004JC004YakkaKijunShuusaiIyakuhinCode TEXT,
MA005JC005KyuuYakkaKijunShuusaiIyakuhinCode TEXT,
MA006JC006HOTBangou TEXT,
MA007JC007ReseputoCode1 TEXT,
MA008JC008ReseputoCode2 TEXT,
MA009JC009YJCode TEXT,
MA010JC010YakkouBunruiCode TEXT,
MA011JC011YakkouBunruiMei TEXT,
MA012JC012ShiyouKubunCode TEXT,
MA013JC013ShiyouKubunMeishou TEXT,
MA014JC014NihonHyoujunShouhinBunruiBangou TEXT,
MA015JC015ZaikeiCode TEXT,
MA016JC016ZaikeiKigou TEXT,
MA017JC017ZaikeiMeishou TEXT,
MA018JC018ShouhinMei TEXT,
MA019JC019HankakuShouhinMei TEXT,
MA020JC020KikakuYouryou TEXT,
MA021JC021HankakuKikakuYouryou TEXT,
MA022JC022ShouhinMeiKanaSortYou TEXT,
MA023JC023ShouhinMeiKanpouYouKigou TEXT,
MA024JC024IppanMeishou TEXT,
MA025JC025YakkaShuusaiMeishou TEXT,
MA026JC026ReseYouIyakuhinMei TEXT,
MA027JC027KikakuTaniMeishou TEXT,
MA028JC028KikakuTaniKigou TEXT,
MA029JC029HanbaiMotoCode TEXT,
MA030JC030HanbaiMotoMei TEXT,
MA031JC031HanbaiMotoMeiKana TEXT,
MA032JC032HanbaiMotoMeiRyakuMei TEXT,
MA033JC033SeizouMotoYunyuuMotoCode TEXT,
MA034JC034SeizouMotoYunyuuMotoMei TEXT,
MA035JC035SeizouMotoYunyuuMotoMeiKana TEXT,
MA036JC036SeizouMotoYunyuuMotoMeiRyakuMei TEXT,
MA037JC037HousouKeitai TEXT,
MA038JC038HousouTaniSuuchi TEXT,
MA039JC039HousouTaniTani TEXT,
MA040JC040HousouSuuryouSuuchi TEXT,
MA041JC041HousouSuuryouTani TEXT,
MA042JC042HousouIrisuuSuuchi TEXT,
MA043JC043HousouIrisuuTani TEXT,
MA044JC044HousouSouryouSuuchi TEXT,
MA045JC045HousouSouryouTani TEXT,
MA046JC046HousouYouryouSuuchi TEXT,
MA047JC047HousouYouryouTani TEXT,
MA048JC048HousouYakkaKeisuu TEXT,
MA049JC049GenTaniYakka TEXT,
MA050JC050GenHousouYakka TEXT,
MA051JC051KyuuTaniYakka TEXT,
MA052JC052KyuuHousouYakka TEXT,
MA053JC053KokuchiTaniYakka TEXT,
MA054JC054KokuchiHousouYakka TEXT,
MA055JC055YakkaKaiteiNengappi TEXT,
MA056JC056YakkaShuusaiNengappi TEXT,
MA057JC057HanbaiKaishiNengappi TEXT,
MA058JC058KeikaSochiNengappi TEXT,
MA059JC059HatsubaiChuushiNengappi TEXT,
MA060JC060SeizouChuushiNengappi TEXT,
MA061JC061Doyaku TEXT,
MA062JC062Gekiyaku TEXT,
MA063JC063Mayaku TEXT,
MA064JC064Kouseishinyaku TEXT,
MA065JC065Kakuseizai TEXT,
MA066JC066KakuseizaiGenryou TEXT,
MA067JC067ShuukanseiIyakuhin TEXT,
MA068JC068ShiteiIyakuhinKyuuKiseiKubun TEXT,
MA069JC069YoushijiIyakuhinKyuuKiseiKubun TEXT,
MA070JC070KetsuekiSeizai TEXT,
MA071JC071NihonYakkyokuhou TEXT,
MA072JC072YuukouKikan TEXT,
MA073JC073ShiyouKigen TEXT,
MA074JC074SeibutsuYuraiSeihin TEXT,
MA075JC075Kouhatsuhin TEXT,
MA076JC076YakkaKijunShuusaiKubun TEXT,
MA077JC077KichouGimuKubun TEXT,
MA078JC078ShouhinKubun TEXT,
MA079JC079ShohousenIyakuhin TEXT,
MA080JC080ChuushiRiyuuKubun TEXT,
MA081JC081MishiyouKyuuRyuutsuuKanrihin TEXT,
MA082JC082MentenanceKubun TEXT,
MA083JC083KouhatsuhinNoAruSenpatsuhinKubun TEXT,
MA084JC084AuthorizedGeneric TEXT,
MA085JC085Biosimilar TEXT,
MA086JC086HighRiskYaku TEXT,
MA087JC087Kuuran1 TEXT,
MA088JC088Kuuran2 TEXT,
MA089JC089Shitsuon TEXT,
MA090JC090Reisho TEXT,
MA091JC091Reizou TEXT,
MA092JC092Reitou TEXT,
MA093JC093Ansho TEXT,
MA094JC094Shakou TEXT,
MA095JC095KimitsuYouki TEXT,
MA096JC096MippuuYouki TEXT,
MA097JC097Kikenbutsu TEXT,
MA098JC098OndoJougen TEXT,
MA099JC099OndoKagen TEXT,
MA100JC100SonotaHokanjouNoChui TEXT,
MA101JC101KonpouJuuryouSizeJouhou TEXT,
MA102JC102KonpouTateSizeJouhou TEXT,
MA103JC103KonpouYokoSizeJouhou TEXT,
MA104JC104KonpouTakasaSizeJouhou TEXT,
MA105JC105KonpouTaiseiSizeJouhou TEXT,
MA106JC106ChuubakoJuuryouSizeJouhou TEXT,
MA107JC107ChuubakoTateSizeJouhou TEXT,
MA108JC108ChuubakoYokoSizeJouhou TEXT,
MA109JC109ChuubakoTakasaSizeJouhou TEXT,
MA110JC110ChuubakoTaiseiSizeJouhou TEXT,
MA111JC111KousouJuuryouSizeJouhou TEXT,
MA112JC112KousouTateSizeJouhou TEXT,
MA113JC113KousouYokoSizeJouhou TEXT,
MA114JC114KousouTakasaSizeJouhou TEXT,
MA115JC115KousouTaiseiSizeJouhou TEXT,
MA116JC116KonpouTaniSizeJouhou TEXT,
MA117JC117HacchuuTaniSizeJouhou TEXT,
MA118JC118KoushinKubun TEXT,
MA119JC119TourokuNengappi TEXT,
MA120JC120KoushinNengappi TEXT,
MA121JC121ChouzaiHousouTaniCode TEXT,
MA122JC122HanbaiHousouTaniCode TEXT,
MA123JC123IppanMeiKana TEXT,
MA124JC124SaishouYakkaKansanKeisuu TEXT,
MA125JA000 TEXT,
MA126JA001JanCode TEXT,
MA127JA002 TEXT,
MA128JA003 TEXT,
MA129JA004 TEXT,
MA130JA005 TEXT,
MA131JA006HousouSuuryouSuuchi TEXT,
MA132JA007HousouSuuryouTaniCode TEXT,
MA133JA008HousouSouryouSuuchi TEXT,
MA134JA009 TEXT,
MA135JA010 TEXT,
MA136JA011 TEXT,
MA137JA012 TEXT,
MA138JA013 TEXT,
MA139JA014 TEXT,
MA140JA015 TEXT,
MA141JA016 TEXT,
MA142JA017 TEXT,
MA143JA018 TEXT,
MA144JA019 TEXT,
MA145JA020 TEXT,
MA146JA021 TEXT,
MA147JA022 TEXT,
MA148JA023 TEXT,
MA149JA024 TEXT,
MA150JA025 TEXT,
MA151JA026 TEXT,
MA152JA027 TEXT,
MA153JA028 TEXT,
MA154JA029 TEXT,
  PRIMARY KEY(MA000JC000JanCode)
);

CREATE TABLE IF NOT EXISTS jcshms (
JC000JanCode TEXT,
JC001JanCodeShikibetsuKubun TEXT,
JC002KyuuJanCode TEXT,
JC003TouitsuShouhinCode TEXT,
JC004YakkaKijunShuusaiIyakuhinCode TEXT,
JC005KyuuYakkaKijunShuusaiIyakuhinCode TEXT,
JC006HOTBangou TEXT,
JC007ReseputoCode1 TEXT,
JC008ReseputoCode2 TEXT,
JC009YJCode TEXT,
JC010YakkouBunruiCode TEXT,
JC011YakkouBunruiMei TEXT,
JC012ShiyouKubunCode TEXT,
JC013ShiyouKubunMeishou TEXT,
JC014NihonHyoujunShouhinBunruiBangou TEXT,
JC015ZaikeiCode TEXT,
JC016ZaikeiKigou TEXT,
JC017ZaikeiMeishou TEXT,
JC018ShouhinMei TEXT,
JC019HankakuShouhinMei TEXT,
JC020KikakuYouryou TEXT,
JC021HankakuKikakuYouryou TEXT,
JC022ShouhinMeiKanaSortYou TEXT,
JC023ShouhinMeiKanpouYouKigou TEXT,
JC024IppanMeishou TEXT,
JC025YakkaShuusaiMeishou TEXT,
JC026ReseYouIyakuhinMei TEXT,
JC027KikakuTaniMeishou TEXT,
JC028KikakuTaniKigou TEXT,
JC029HanbaiMotoCode TEXT,
JC030HanbaiMotoMei TEXT,
JC031HanbaiMotoMeiKana TEXT,
JC032HanbaiMotoMeiRyakuMei TEXT,
JC033SeizouMotoYunyuuMotoCode TEXT,
JC034SeizouMotoYunyuuMotoMei TEXT,
JC035SeizouMotoYunyuuMotoMeiKana TEXT,
JC036SeizouMotoYunyuuMotoMeiRyakuMei TEXT,
JC037HousouKeitai TEXT,
JC038HousouTaniSuuchi TEXT,
JC039HousouTaniTani TEXT,
JC040HousouSuuryouSuuchi TEXT,
JC041HousouSuuryouTani TEXT,
JC042HousouIrisuuSuuchi TEXT,
JC043HousouIrisuuTani TEXT,
JC044HousouSouryouSuuchi TEXT,
JC045HousouSouryouTani TEXT,
JC046HousouYouryouSuuchi TEXT,
JC047HousouYouryouTani TEXT,
JC048HousouYakkaKeisuu TEXT,
JC049GenTaniYakka TEXT,
JC050GenHousouYakka TEXT,
JC051KyuuTaniYakka TEXT,
JC052KyuuHousouYakka TEXT,
JC053KokuchiTaniYakka TEXT,
JC054KokuchiHousouYakka TEXT,
JC055YakkaKaiteiNengappi TEXT,
JC056YakkaShuusaiNengappi TEXT,
JC057HanbaiKaishiNengappi TEXT,
JC058KeikaSochiNengappi TEXT,
JC059HatsubaiChuushiNengappi TEXT,
JC060SeizouChuushiNengappi TEXT,
JC061Doyaku TEXT,
JC062Gekiyaku TEXT,
JC063Mayaku TEXT,
JC064Kouseishinyaku TEXT,
JC065Kakuseizai TEXT,
JC066KakuseizaiGenryou TEXT,
JC067ShuukanseiIyakuhin TEXT,
JC068ShiteiIyakuhinKyuuKiseiKubun TEXT,
JC069YoushijiIyakuhinKyuuKiseiKubun TEXT,
JC070KetsuekiSeizai TEXT,
JC071NihonYakkyokuhou TEXT,
JC072YuukouKikan TEXT,
JC073ShiyouKigen TEXT,
JC074SeibutsuYuraiSeihin TEXT,
JC075Kouhatsuhin TEXT,
JC076YakkaKijunShuusaiKubun TEXT,
JC077KichouGimuKubun TEXT,
JC078ShouhinKubun TEXT,
JC079ShohousenIyakuhin TEXT,
JC080ChuushiRiyuuKubun TEXT,
JC081MishiyouKyuuRyuutsuuKanrihin TEXT,
JC082MentenanceKubun TEXT,
JC083KouhatsuhinNoAruSenpatsuhinKubun TEXT,
JC084AuthorizedGeneric TEXT,
JC085Biosimilar TEXT,
JC086HighRiskYaku TEXT,
JC087Kuuran1 TEXT,
JC088Kuuran2 TEXT,
JC089Shitsuon TEXT,
JC090Reisho TEXT,
JC091Reizou TEXT,
JC092Reitou TEXT,
JC093Ansho TEXT,
JC094Shakou TEXT,
JC095KimitsuYouki TEXT,
JC096MippuuYouki TEXT,
JC097Kikenbutsu TEXT,
JC098OndoJougen TEXT,
JC099OndoKagen TEXT,
JC100SonotaHokanjouNoChui TEXT,
JC101KonpouJuuryouSizeJouhou TEXT,
JC102KonpouTateSizeJouhou TEXT,
JC103KonpouYokoSizeJouhou TEXT,
JC104KonpouTakasaSizeJouhou TEXT,
JC105KonpouTaiseiSizeJouhou TEXT,
JC106ChuubakoJuuryouSizeJouhou TEXT,
JC107ChuubakoTateSizeJouhou TEXT,
JC108ChuubakoYokoSizeJouhou TEXT,
JC109ChuubakoTakasaSizeJouhou TEXT,
JC110ChuubakoTaiseiSizeJouhou TEXT,
JC111KousouJuuryouSizeJouhou TEXT,
JC112KousouTateSizeJouhou TEXT,
JC113KousouYokoSizeJouhou TEXT,
JC114KousouTakasaSizeJouhou TEXT,
JC115KousouTaiseiSizeJouhou TEXT,
JC116KonpouTaniSizeJouhou TEXT,
JC117HacchuuTaniSizeJouhou TEXT,
JC118KoushinKubun TEXT,
JC119TourokuNengappi TEXT,
JC120KoushinNengappi TEXT,
JC121ChouzaiHousouTaniCode TEXT,
JC122HanbaiHousouTaniCode TEXT,
JC123IppanMeiKana TEXT,
JC124SaishouYakkaKansanKeisuu TEXT,
PRIMARY KEY(JC000JanCode)
);

CREATE TABLE IF NOT EXISTS jancode (
JA000 TEXT,
JA001JanCode TEXT,
JA002 TEXT,
JA003 TEXT,
JA004 TEXT,
JA005 TEXT,
JA006HousouSuuryouSuuchi TEXT,
JA007HousouSuuryouTaniCode TEXT,
JA008HousouSouryouSuuchi TEXT,
JA009 TEXT,
JA010 TEXT,
JA011 TEXT,
JA012 TEXT,
JA013 TEXT,
JA014 TEXT,
JA015 TEXT,
JA016 TEXT,
JA017 TEXT,
JA018 TEXT,
JA019 TEXT,
JA020 TEXT,
JA021 TEXT,
JA022 TEXT,
JA023 TEXT,
JA024 TEXT,
JA025 TEXT,
JA026 TEXT,
JA027 TEXT,
JA028 TEXT,
JA029 TEXT,
PRIMARY KEY(JA001JanCode)
);

CREATE TABLE IF NOT EXISTS datrecords (
  CurrentOroshiCode         TEXT,
  DatDate                   TEXT,
  DatDeliveryFlag           TEXT,
  DatReceiptNumber          TEXT,
  DatLineNumber             TEXT,
  DatJanCode                TEXT,
  DatProductName            TEXT,
  DatQuantity               TEXT,
  DatUnitPrice              TEXT,
  DatSubtotal               TEXT,
  DatPackagingDrugPrice     TEXT,
  DatExpiryDate             TEXT,
  DatLotNumber              TEXT,
  organizedFlag             INTEGER,
  PRIMARY KEY (
    CurrentOroshiCode,
    DatDeliveryFlag,
    DatDate,
    DatReceiptNumber,
    DatLineNumber,
    DatJanCode
  )
);





CREATE TABLE IF NOT EXISTS usagerecords (
    usageDate         TEXT,
    usageYjCode       TEXT,
    usageJanCode      TEXT,
    usageProductName  TEXT,
    usageAmount       TEXT,
    usageUnit         TEXT,
    usageUnitName     TEXT,
    organizedFlag     INTEGER NOT NULL DEFAULT 0, -- 1: organized, 0: disorganized
    PRIMARY KEY (usageDate, usageYjCode, usageJanCode)
);

CREATE TABLE IF NOT EXISTS inventory (
  invDate                     TEXT    NOT NULL,  -- 棚卸日 (YYYYMMDD)
  invYjCode                   TEXT    NOT NULL,  -- YJコード
  invJanCode                  TEXT    NOT NULL,  -- JANコード
  invProductName              TEXT    NOT NULL,  -- 商品名
  invJanHousouSuuryouNumber   REAL    NOT NULL,  -- JAN包装数量（数字）
  qty                         REAL    NOT NULL,  -- 在庫数（包装単位）
  HousouTaniUnit              TEXT    NOT NULL,  -- 包装単位（単位）
  InvHousouTaniUnit           TEXT    NOT NULL,  -- 包装単位（単位）逆マッピング
  janqty                      REAL    NOT NULL,  -- 在庫数（JAN包装単位）
  JanHousouSuuryouUnit        TEXT    NOT NULL,  -- JAN包装単位（単位）
  InvJanHousouSuuryouUnit     TEXT    NOT NULL,  -- JAN包装単位（単位）逆マッピング
  PRIMARY KEY (invDate, invJanCode)
);





-- =========================================
-- MA2 テーブル定義
-- =========================================
CREATE TABLE IF NOT EXISTS ma2 (
    MA2JanCode                TEXT    PRIMARY KEY,
    MA2YjCode                 TEXT,
    Shouhinmei                TEXT,
    HousouKeitai              TEXT,
    HousouTaniUnit            TEXT,
    HousouSouryouNumber       INTEGER,
    JanHousouSuuryouNumber    INTEGER,
    JanHousouSuuryouUnit      TEXT,
    JanHousouSouryouNumber    INTEGER
 );


-- =========================================
-- シーケンス管理用テーブル追加
-- =========================================
CREATE TABLE IF NOT EXISTS code_sequences (
  name    TEXT    PRIMARY KEY,  -- 'MA1Y','MA2Y','MA2J'
  last_no INTEGER NOT NULL      -- 最終発番番号
);

-- 初期レコード（すでに存在する場合は無視）
INSERT OR IGNORE INTO code_sequences(name, last_no) VALUES
  ('MA2Y', 0),
  ('MA2J', 0);